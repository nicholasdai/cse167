{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { useModalContext } from '../../context/modal-context';\nimport { useDOMAttribute } from '../use-dom-attribute';\nimport { useEffectOnUpdate } from '../use-effect-on-update';\nimport { useRandomId } from '../use-unique-id';\n/**\n * This function returns an object that needs to be spread onto the same\n * element as the `elementRef`, so that the data attribute is applied\n * correctly.\n */\nexport function usePerformanceMarks(name, enabled, elementRef, getDetails, dependencies) {\n  const id = useRandomId();\n  const {\n    isInModal\n  } = useModalContext();\n  const attributes = useDOMAttribute(elementRef, 'data-analytics-performance-mark', id);\n  useEffect(() => {\n    if (!enabled || !elementRef.current || isInModal) {\n      return;\n    }\n    const elementVisible = elementRef.current.offsetWidth > 0 && elementRef.current.offsetHeight > 0 && getComputedStyle(elementRef.current).visibility !== 'hidden';\n    if (!elementVisible) {\n      return;\n    }\n    const renderedMarkName = `${name}Rendered`;\n    performance.mark(renderedMarkName, {\n      detail: Object.assign({\n        source: 'awsui',\n        instanceIdentifier: id\n      }, getDetails())\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffectOnUpdate(() => {\n    if (!enabled || !elementRef.current || isInModal) {\n      return;\n    }\n    const elementVisible = elementRef.current.offsetWidth > 0 && elementRef.current.offsetHeight > 0 && getComputedStyle(elementRef.current).visibility !== 'hidden';\n    if (!elementVisible) {\n      return;\n    }\n    const updatedMarkName = `${name}Updated`;\n    performance.mark(updatedMarkName, {\n      detail: Object.assign({\n        source: 'awsui',\n        instanceIdentifier: id\n      }, getDetails())\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencies);\n  return attributes;\n}","map":{"version":3,"names":["useEffect","useModalContext","useDOMAttribute","useEffectOnUpdate","useRandomId","usePerformanceMarks","name","enabled","elementRef","getDetails","dependencies","id","isInModal","attributes","current","elementVisible","offsetWidth","offsetHeight","getComputedStyle","visibility","renderedMarkName","performance","mark","detail","Object","assign","source","instanceIdentifier","updatedMarkName"],"sources":["C:\\Users\\nicky\\Documents\\GitHub\\cse167\\final_project\\node_modules\\src\\internal\\hooks\\use-performance-marks\\index.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect } from 'react';\n\nimport { useModalContext } from '../../context/modal-context';\nimport { useDOMAttribute } from '../use-dom-attribute';\nimport { useEffectOnUpdate } from '../use-effect-on-update';\nimport { useRandomId } from '../use-unique-id';\n\n/**\n * This function returns an object that needs to be spread onto the same\n * element as the `elementRef`, so that the data attribute is applied\n * correctly.\n */\nexport function usePerformanceMarks(\n  name: string,\n  enabled: boolean,\n  elementRef: React.RefObject<HTMLElement>,\n  getDetails: () => Record<string, string | boolean | number | undefined>,\n  dependencies: React.DependencyList\n) {\n  const id = useRandomId();\n  const { isInModal } = useModalContext();\n  const attributes = useDOMAttribute(elementRef, 'data-analytics-performance-mark', id);\n\n  useEffect(() => {\n    if (!enabled || !elementRef.current || isInModal) {\n      return;\n    }\n\n    const elementVisible =\n      elementRef.current.offsetWidth > 0 &&\n      elementRef.current.offsetHeight > 0 &&\n      getComputedStyle(elementRef.current).visibility !== 'hidden';\n\n    if (!elementVisible) {\n      return;\n    }\n\n    const renderedMarkName = `${name}Rendered`;\n\n    performance.mark(renderedMarkName, {\n      detail: {\n        source: 'awsui',\n        instanceIdentifier: id,\n        ...getDetails(),\n      },\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffectOnUpdate(() => {\n    if (!enabled || !elementRef.current || isInModal) {\n      return;\n    }\n    const elementVisible =\n      elementRef.current.offsetWidth > 0 &&\n      elementRef.current.offsetHeight > 0 &&\n      getComputedStyle(elementRef.current).visibility !== 'hidden';\n\n    if (!elementVisible) {\n      return;\n    }\n\n    const updatedMarkName = `${name}Updated`;\n\n    performance.mark(updatedMarkName, {\n      detail: {\n        source: 'awsui',\n        instanceIdentifier: id,\n        ...getDetails(),\n      },\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencies);\n\n  return attributes;\n}\n"],"mappings":"AAAA;AACA;AAEA,SAASA,SAAS,QAAQ,OAAO;AAEjC,SAASC,eAAe,QAAQ,6BAA6B;AAC7D,SAASC,eAAe,QAAQ,sBAAsB;AACtD,SAASC,iBAAiB,QAAQ,yBAAyB;AAC3D,SAASC,WAAW,QAAQ,kBAAkB;AAE9C;;;;;AAKA,OAAM,SAAUC,mBAAmBA,CACjCC,IAAY,EACZC,OAAgB,EAChBC,UAAwC,EACxCC,UAAuE,EACvEC,YAAkC;EAElC,MAAMC,EAAE,GAAGP,WAAW,EAAE;EACxB,MAAM;IAAEQ;EAAS,CAAE,GAAGX,eAAe,EAAE;EACvC,MAAMY,UAAU,GAAGX,eAAe,CAACM,UAAU,EAAE,iCAAiC,EAAEG,EAAE,CAAC;EAErFX,SAAS,CAAC,MAAK;IACb,IAAI,CAACO,OAAO,IAAI,CAACC,UAAU,CAACM,OAAO,IAAIF,SAAS,EAAE;MAChD;;IAGF,MAAMG,cAAc,GAClBP,UAAU,CAACM,OAAO,CAACE,WAAW,GAAG,CAAC,IAClCR,UAAU,CAACM,OAAO,CAACG,YAAY,GAAG,CAAC,IACnCC,gBAAgB,CAACV,UAAU,CAACM,OAAO,CAAC,CAACK,UAAU,KAAK,QAAQ;IAE9D,IAAI,CAACJ,cAAc,EAAE;MACnB;;IAGF,MAAMK,gBAAgB,GAAG,GAAGd,IAAI,UAAU;IAE1Ce,WAAW,CAACC,IAAI,CAACF,gBAAgB,EAAE;MACjCG,MAAM,EAAAC,MAAA,CAAAC,MAAA;QACJC,MAAM,EAAE,OAAO;QACfC,kBAAkB,EAAEhB;MAAE,GACnBF,UAAU,EAAE;KAElB,CAAC;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAENN,iBAAiB,CAAC,MAAK;IACrB,IAAI,CAACI,OAAO,IAAI,CAACC,UAAU,CAACM,OAAO,IAAIF,SAAS,EAAE;MAChD;;IAEF,MAAMG,cAAc,GAClBP,UAAU,CAACM,OAAO,CAACE,WAAW,GAAG,CAAC,IAClCR,UAAU,CAACM,OAAO,CAACG,YAAY,GAAG,CAAC,IACnCC,gBAAgB,CAACV,UAAU,CAACM,OAAO,CAAC,CAACK,UAAU,KAAK,QAAQ;IAE9D,IAAI,CAACJ,cAAc,EAAE;MACnB;;IAGF,MAAMa,eAAe,GAAG,GAAGtB,IAAI,SAAS;IAExCe,WAAW,CAACC,IAAI,CAACM,eAAe,EAAE;MAChCL,MAAM,EAAAC,MAAA,CAAAC,MAAA;QACJC,MAAM,EAAE,OAAO;QACfC,kBAAkB,EAAEhB;MAAE,GACnBF,UAAU,EAAE;KAElB,CAAC;IACF;EACF,CAAC,EAAEC,YAAY,CAAC;EAEhB,OAAOG,UAAU;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}