{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useContext, useEffect, useRef } from 'react';\nimport { fireNonCancelableEvent } from '../../internal/events';\nimport { sortByPriority } from '../../internal/plugins/helpers/utils';\nimport { ActiveDrawersContext } from '../utils/visibility-context';\nimport styles from './styles.css.js';\nfunction RuntimeDrawerWrapper({\n  mountContent,\n  unmountContent,\n  id\n}) {\n  const ref = useRef(null);\n  const visibilityChangeCallback = useRef(null);\n  const activeDrawersIds = useContext(ActiveDrawersContext);\n  const isVisible = !!id && activeDrawersIds.includes(id);\n  useEffect(() => {\n    const container = ref.current;\n    mountContent(container, {\n      onVisibilityChange: cb => {\n        visibilityChangeCallback.current = cb;\n      }\n    });\n    return () => {\n      unmountContent(container);\n      visibilityChangeCallback.current = null;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    var _a;\n    (_a = visibilityChangeCallback.current) === null || _a === void 0 ? void 0 : _a.call(visibilityChangeCallback, isVisible);\n  }, [isVisible]);\n  return React.createElement(\"div\", {\n    ref: ref,\n    className: styles['runtime-content-wrapper']\n  });\n}\nconst mapRuntimeConfigToDrawer = runtimeConfig => {\n  var _a;\n  const {\n      mountContent,\n      unmountContent,\n      trigger\n    } = runtimeConfig,\n    runtimeDrawer = __rest(runtimeConfig, [\"mountContent\", \"unmountContent\", \"trigger\"]);\n  return Object.assign(Object.assign({}, runtimeDrawer), {\n    ariaLabels: Object.assign({\n      drawerName: (_a = runtimeDrawer.ariaLabels.content) !== null && _a !== void 0 ? _a : ''\n    }, runtimeDrawer.ariaLabels),\n    trigger: trigger ? {\n      iconSvg:\n      // eslint-disable-next-line react/no-danger\n      React.createElement(\"span\", {\n        dangerouslySetInnerHTML: {\n          __html: trigger.iconSvg\n        }\n      })\n    } : undefined,\n    content: React.createElement(RuntimeDrawerWrapper, {\n      key: runtimeDrawer.id,\n      mountContent: mountContent,\n      unmountContent: unmountContent,\n      id: runtimeDrawer.id\n    }),\n    onResize: event => {\n      fireNonCancelableEvent(runtimeDrawer.onResize, {\n        size: event.detail.size,\n        id: runtimeDrawer.id\n      });\n    }\n  });\n};\nexport function convertRuntimeDrawers(localDrawers, globalDrawers) {\n  const converted = localDrawers.map(mapRuntimeConfigToDrawer);\n  const sorted = sortByPriority(converted);\n  return {\n    global: sortByPriority(globalDrawers.map(mapRuntimeConfigToDrawer)),\n    localBefore: sorted.filter(item => {\n      var _a;\n      return ((_a = item.orderPriority) !== null && _a !== void 0 ? _a : 0) > 0;\n    }),\n    localAfter: sorted.filter(item => {\n      var _a;\n      return ((_a = item.orderPriority) !== null && _a !== void 0 ? _a : 0) <= 0;\n    })\n  };\n}","map":{"version":3,"names":["React","useContext","useEffect","useRef","fireNonCancelableEvent","sortByPriority","ActiveDrawersContext","styles","RuntimeDrawerWrapper","mountContent","unmountContent","id","ref","visibilityChangeCallback","activeDrawersIds","isVisible","includes","container","current","onVisibilityChange","cb","_a","call","createElement","className","mapRuntimeConfigToDrawer","runtimeConfig","trigger","runtimeDrawer","__rest","Object","assign","ariaLabels","drawerName","content","iconSvg","dangerouslySetInnerHTML","__html","undefined","key","onResize","event","size","detail","convertRuntimeDrawers","localDrawers","globalDrawers","converted","map","sorted","global","localBefore","filter","item","orderPriority","localAfter"],"sources":["C:\\Users\\nicky\\Documents\\GitHub\\cse167\\final_project\\node_modules\\src\\app-layout\\runtime-drawer\\index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useContext, useEffect, useRef } from 'react';\n\nimport { fireNonCancelableEvent, NonCancelableEventHandler } from '../../internal/events';\nimport {\n  DrawerConfig as RuntimeDrawerConfig,\n  DrawerStateChangeParams,\n} from '../../internal/plugins/controllers/drawers';\nimport { sortByPriority } from '../../internal/plugins/helpers/utils';\nimport { AppLayoutProps } from '../interfaces';\nimport { ActiveDrawersContext } from '../utils/visibility-context';\n\nimport styles from './styles.css.js';\n\nexport interface RuntimeDrawer extends AppLayoutProps.Drawer {\n  onToggle?: NonCancelableEventHandler<DrawerStateChangeParams>;\n}\n\nexport interface DrawersLayout {\n  global: Array<RuntimeDrawer>;\n  localBefore: Array<RuntimeDrawer>;\n  localAfter: Array<RuntimeDrawer>;\n}\n\ntype VisibilityCallback = (isVisible: boolean) => void;\n\ninterface RuntimeContentWrapperProps {\n  id?: string;\n  mountContent: RuntimeDrawerConfig['mountContent'];\n  unmountContent: RuntimeDrawerConfig['unmountContent'];\n}\n\nfunction RuntimeDrawerWrapper({ mountContent, unmountContent, id }: RuntimeContentWrapperProps) {\n  const ref = useRef<HTMLDivElement>(null);\n  const visibilityChangeCallback = useRef<VisibilityCallback | null>(null);\n  const activeDrawersIds = useContext(ActiveDrawersContext);\n  const isVisible = !!id && activeDrawersIds.includes(id);\n\n  useEffect(() => {\n    const container = ref.current!;\n    mountContent(container, {\n      onVisibilityChange: cb => {\n        visibilityChangeCallback.current = cb;\n      },\n    });\n    return () => {\n      unmountContent(container);\n      visibilityChangeCallback.current = null;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    visibilityChangeCallback.current?.(isVisible);\n  }, [isVisible]);\n\n  return <div ref={ref} className={styles['runtime-content-wrapper']}></div>;\n}\n\nconst mapRuntimeConfigToDrawer = (\n  runtimeConfig: RuntimeDrawerConfig\n): AppLayoutProps.Drawer & {\n  orderPriority?: number;\n  onToggle?: NonCancelableEventHandler<DrawerStateChangeParams>;\n} => {\n  const { mountContent, unmountContent, trigger, ...runtimeDrawer } = runtimeConfig;\n\n  return {\n    ...runtimeDrawer,\n    ariaLabels: { drawerName: runtimeDrawer.ariaLabels.content ?? '', ...runtimeDrawer.ariaLabels },\n    trigger: trigger\n      ? {\n          iconSvg: (\n            // eslint-disable-next-line react/no-danger\n            <span dangerouslySetInnerHTML={{ __html: trigger.iconSvg }} />\n          ),\n        }\n      : undefined,\n    content: (\n      <RuntimeDrawerWrapper\n        key={runtimeDrawer.id}\n        mountContent={mountContent}\n        unmountContent={unmountContent}\n        id={runtimeDrawer.id}\n      />\n    ),\n    onResize: event => {\n      fireNonCancelableEvent(runtimeDrawer.onResize, { size: event.detail.size, id: runtimeDrawer.id });\n    },\n  };\n};\n\nexport function convertRuntimeDrawers(\n  localDrawers: Array<RuntimeDrawerConfig>,\n  globalDrawers: Array<RuntimeDrawerConfig>\n): DrawersLayout {\n  const converted = localDrawers.map(mapRuntimeConfigToDrawer);\n  const sorted = sortByPriority(converted);\n  return {\n    global: sortByPriority(globalDrawers.map(mapRuntimeConfigToDrawer)),\n    localBefore: sorted.filter(item => (item.orderPriority ?? 0) > 0),\n    localAfter: sorted.filter(item => (item.orderPriority ?? 0) <= 0),\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}